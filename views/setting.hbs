<div class="container">
    <div class="row" style="padding-left:98px; padding-right:118px;">
        {{>leftbar route='setting'}}
        <div class="ms-4 " style="border-right:1px solid #E6ECF0; border-left:1px solid #E6ECF0;  width:641px; ">
            <h4 class="m-4" style="font-weight: 700;font-size: 24px;line-height: 26px;">帳戶設定</h4>
            <hr style="width: 639px;height: 1px; color:#E6ECF0">
            <form action="/edit?_method=PATCH" method="POST" class="p-4">
                <div
                    style="background-color:#F5F8FA; margin-bottom:32px; border-radius:2px; border-bottom:2px solid #657786;">
                    <label for="account" class="form-label mb-0"
                        style="margin-left:10px;color:#696974;font-size: 14px;line-height: 22px;">帳號</label>
                    <input type="text" class="form-control border-0" id="account" name="account" placeholder="請輸入帳號"
                        style="background-color:#F5F8FA;color:#B5B5BE;font-size: 16px;line-height: 26px;"
                        value="{{user.account}}">
                </div>
                <div
                    style="background-color:#F5F8FA; margin-bottom:32px; border-radius:2px; border-bottom:2px solid #657786;">
                    <label for="name" class="form-label mb-0"
                        style="margin-left:10px;color:#696974;font-size: 14px;line-height: 22px;">名稱</label>
                    <input type="text" class="form-control border-0" id="name" name="name" placeholder="請輸入使用者名稱"
                        style="background-color:#F5F8FA;color:#B5B5BE;font-size: 16px;line-height: 26px;" maxlength="50"
                        value="{{user.name}}">
                </div>
                <div
                    style="background-color:#F5F8FA; margin-bottom:32px; border-radius:2px; border-bottom:2px solid #657786;">
                    <label for="email" class="form-label mb-0"
                        style="margin-left:10px;color:#696974;font-size: 14px;line-height: 22px;">Email</label>
                    <input type="email" class="form-control border-0" id="email" name="email" placeholder="請輸入Email"
                        style="background-color:#F5F8FA;color:#B5B5BE;font-size: 16px;line-height: 26px;"
                        value="{{user.email}}">

                </div>
                <div
                    style="background-color:#F5F8FA; margin-bottom:32px; border-radius:2px; border-bottom:2px solid #657786;">
                    <label for="password" class="form-label mb-0"
                        style="margin-left:10px;color:#696974;font-size: 14px;line-height: 22px;">密碼</label>
                    <input type="password" class="form-control  border-0" id="password" name="password"
                        placeholder="請設定密碼"
                        style="background-color:#F5F8FA;color:#B5B5BE;font-size: 16px;line-height: 26px;">
                </div>
                <div
                    style="background-color:#F5F8FA; margin-bottom:40px; border-radius:2px; border-bottom:2px solid #657786;">
                    <label for="checkPassword" class="form-label mb-0"
                        style="margin-left:10px;color:#696974;font-size: 14px;line-height: 22px;">密碼確認</label>
                    <input type="password" class="form-control border-0" id="checkPassword" name="checkPassword"
                        placeholder="請再次輸入密碼"
                        style="background-color:#F5F8FA;color:#B5B5BE;font-size: 16px;line-height: 26px;">

                </div>
                <div class="d-flex justify-content-end"><button type="submit" class="btn"
                        style=" width: 88px;height: 46px; background-color:#FF6600; border-radius:50px; color:#FFFFFF;font-size: 20px;line-height: 30px;">
                        儲存
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{{!-- user推文彈跳視窗 --}}
<div class="modal" tabindex="-1" id="user-tweet-modal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <a href="/users/{{user.id}}">
                    <img src="{{user.avatar}}" class="fl" width="50px" height="50px"
                        style="border-radius:50%; margin-right: 3px;" />
                </a>

                <form action="/tweets" method="POST" onsubmit="return validateTweet();">
                    <textarea class="modal-input-tweets" id="user-tweet-description-in-main" type="description"
                        placeholder="有什麼新鮮事？" name="description" id="user-tweet-description" maxlength="140" rows="3"
                        cols="100" required></textarea>
                    <div class="d-flex flex-row-reverse mb-1">
                        <button class="tweetbtn" type="submit">推文</button>
                        <p id="user-tweet-description-alert-in-main" class="user-tweet-alertMsg">字數不可超過 140 字</p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

<script>
    const userTweetDescription = document.getElementById('user-tweet-description-in-main')
    const userTweetDescriptionAlertMsg = document.getElementById('user-tweet-description-alert-in-main')

    userTweetDescription.addEventListener('input', function userTweetModalMsg(e) {
        const tweetContent = e.target.value.trim();
        if (!tweetContent.length) {
            userTweetDescriptionAlertMsg.innerHTML = '內容不可空白';
            userTweetDescriptionAlertMsg.style.color = 'red';
        } else if (tweetContent.length <= 140) {
            userTweetDescriptionAlertMsg.innerHTML = `${tweetContent.length}/140`;
            userTweetDescriptionAlertMsg.style.color = 'black';
        } else {
            userTweetDescriptionAlertMsg.innerHTML = '字數不可超過 140 字';
            userTweetDescriptionAlertMsg.style.color = 'red';
        }
    });

    function validateTweet() {
        const tweetContent = userTweetDescription.value.trim(); if (!tweetContent.length || tweetContent.length > 140) {
            return false;
        }
        return true;
    }
</script>